---
- name: Update homebrew
  homebrew: update_homebrew=yes upgrade_all=yes

- name: Install homebrew packages
  homebrew: name={{ item.name }} install_options={{ item.options|default() }}
  with_items:
    - { name: 'readline' }
    - { name: 'coreutils' }

    - { name: 'zsh' }
    - { name: 'zsh-completions' }
    - { name: 'zsh-syntax-highlighting' }
    - { name: 'vim', options: 'with-lua', 'override-system-vim' }
    - { name: 'tmux' }

    - { name: 'git' }
    - { name: 'ctags' }
    - { name: 'tig' }
    - { name: 'hub' }
    - { name: 'ghq' }
    - { name: 'peco' }
    - { name: 'rg' }
    - { name: 'ag' }
    - { name: 'gibo' }
    - { name: 'tree' }
    - { name: 'jq' }
    - { name: 'codemod' }
    - { name: 'phantomjs' }
    - { name: 'rbenv' }
    - { name: 'reattach-to-user-namespace' }

- name: Install homebrew cask packages
  homebrew_cask: name={{ item }}
  with_items:
    - vagrant
    - virtualbox
    - google-chrome
    - google-japanese-ime
    - flux
    - slack
    - iterm2
    - karabiner
